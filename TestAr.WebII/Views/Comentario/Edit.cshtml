@model Int32
@{
    ViewBag.Title = "Editar Comentario";
}
<h2>Editar</h2>

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h4>Role</h4>
        <hr />
        <div class="form-group">
            <div class="col-md-10">
                <label>IdComentario</label>
                <label id="IdComentario"></label>
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-10">
                <label>Comentario</label>
                <input type="text" id="Comentario">
            </div>
        </div>
        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Guardar" class="btn btn-default" id="guardar" />
            </div>
        </div>
    </div>
}
<div>
    @Html.ActionLink("Volver", "Index")
</div>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
            $(document).ready(function () {
                let api_url = 'http://localhost:62040/';
                var id = @Html.Raw(Json.Encode(Model));

                $("#guardar").click(function () {

                    var json =
                    {
                        IdRole: $("#IdComentario").val(),
                        Nombre: $("#Comentario").val()
                    };

                    $.ajax({
                        url: `${api_url}api/Comentario/${id}`,
                        type: 'PUT',
                        data: json
                    });
                });

                $.get(`${api_url}api/Comentario/${id}`, function (data) {
                    var tmpData = JSON.parse(data);
                    $("#IdComentario").text(tmpData.IdComentario);
                    $("#Comentario").val(tmpData.Comentario);

                })
            });


    </script>
}
