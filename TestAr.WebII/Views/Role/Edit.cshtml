@model Int32

@{
    ViewBag.Title = "Editar Role";
}

<h2>Editar</h2>


@using (Html.BeginForm())
{
    

    <div class="form-horizontal">
        <h4>Role</h4>
        <hr />
        <div class="form-group">
            <div class="col-md-10">
                <label>IdRole</label>
                <label id="IdRole"></label>
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-10">
                <label>Nombre</label>
                <input type="text" id="Nombre">
            </div>
        </div>

        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">
                <input type="submit" value="Guardar" class="btn btn-default" id="guardar" />
            </div>
        </div>
    </div>
}

<div>
    @Html.ActionLink("Volver", "Index")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script>
            $(document).ready(function () {
                let api_url = 'http://localhost:62040/';
                var id = @Html.Raw(Json.Encode(Model));

                $("#guardar").click(function () {

                    var json =
                    {
                        IdRole: $("#IdRole").val(),
                        Nombre: $("#Nombre").val()
                    };

                    $.ajax({
                        url: `${api_url}api/Role/${id}`,
                        type: 'PUT',
                        data: json
                    });
                });

                $.get(`${api_url}api/Role/${id}`, function (data) {
                    var tmpData = JSON.parse(data);
                    $("#IdRole").text(tmpData.IdRole);
                    $("#Nombre").val(tmpData.Nombre);

                })
            });


    </script>
}
